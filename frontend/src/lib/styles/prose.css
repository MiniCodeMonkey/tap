/**
 * Prose Typography Styles
 *
 * These styles apply presentation-scale typography to markdown content.
 * Use the .prose class wrapper around markdown-rendered HTML for
 * consistent, beautiful typography throughout presentations.
 *
 * All styles use CSS custom properties from the theme system (--color-*, --font-*)
 * and presentation-scale font sizes from the Tailwind config.
 */

/* ============================================================================
 * Base Prose Container
 * ============================================================================ */

.prose {
  color: var(--color-text);
  font-family: var(--font-sans);
  line-height: 1.5;
  max-width: none; /* Allow full width in slides */
}

/* ============================================================================
 * Headings - Presentation scale typography
 * ============================================================================ */

.prose h1 {
  font-size: 4rem; /* slide-h2 for content slides */
  line-height: 1.2;
  letter-spacing: -0.01em;
  font-weight: 600;
  margin: 0;
  margin-bottom: 1.5rem;
  color: var(--color-text);
}

.prose h2 {
  font-size: 2.5rem; /* slide-h3 */
  line-height: 1.25;
  letter-spacing: -0.01em;
  font-weight: 600;
  margin: 0;
  margin-bottom: 1.25rem;
  color: var(--color-text);
}

.prose h3 {
  font-size: 2rem; /* slide-body */
  line-height: 1.3;
  font-weight: 600;
  margin: 0;
  margin-bottom: 1rem;
  color: var(--color-text);
}

.prose h4 {
  font-size: 1.75rem;
  line-height: 1.35;
  font-weight: 600;
  margin: 0;
  margin-bottom: 0.75rem;
  color: var(--color-text);
}

.prose h5 {
  font-size: 1.5rem;
  line-height: 1.4;
  font-weight: 600;
  margin: 0;
  margin-bottom: 0.5rem;
  color: var(--color-text);
}

.prose h6 {
  font-size: 1.25rem;
  line-height: 1.4;
  font-weight: 600;
  margin: 0;
  margin-bottom: 0.5rem;
  color: var(--color-muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Headings following content should have top margin */
.prose * + h1 { margin-top: 3rem; }
.prose * + h2 { margin-top: 2.5rem; }
.prose * + h3 { margin-top: 2rem; }
.prose * + h4 { margin-top: 1.5rem; }
.prose * + h5 { margin-top: 1.25rem; }
.prose * + h6 { margin-top: 1rem; }

/* ============================================================================
 * Paragraphs
 * ============================================================================ */

.prose p {
  font-size: 2rem; /* slide-body */
  line-height: 1.5;
  margin: 0;
  margin-bottom: 1.25rem;
}

.prose p:last-child {
  margin-bottom: 0;
}

/* Lead paragraph - slightly larger for emphasis */
.prose p.lead,
.prose > p:first-child {
  font-size: 2.25rem;
  line-height: 1.45;
  color: var(--color-text);
}

/* ============================================================================
 * Lists
 * ============================================================================ */

.prose ul,
.prose ol {
  font-size: 2rem; /* slide-body */
  line-height: 1.5;
  margin: 0;
  margin-bottom: 1.25rem;
  padding-left: 1.5em;
}

.prose ul {
  list-style-type: disc;
}

.prose ol {
  list-style-type: decimal;
}

.prose li {
  margin-bottom: 0.5em;
  padding-left: 0.25em;
}

.prose li:last-child {
  margin-bottom: 0;
}

.prose li::marker {
  color: var(--color-accent);
}

/* Nested lists */
.prose li > ul,
.prose li > ol {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-size: inherit;
}

.prose ul ul {
  list-style-type: circle;
}

.prose ul ul ul {
  list-style-type: square;
}

/* Task lists (checkbox lists) */
.prose ul.task-list {
  list-style: none;
  padding-left: 0;
}

.prose .task-list-item {
  display: flex;
  align-items: flex-start;
  gap: 0.75em;
}

.prose .task-list-item input[type="checkbox"] {
  margin-top: 0.45em;
  width: 1.25em;
  height: 1.25em;
  accent-color: var(--color-accent);
}

/* ============================================================================
 * Inline Code
 * ============================================================================ */

.prose code {
  font-family: var(--font-mono);
  font-size: 0.9em;
  background-color: var(--color-code-bg, rgba(0, 0, 0, 0.05));
  color: var(--color-code-text, var(--color-text));
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-weight: 500;
  word-break: break-word;
}

/* Reset code inside pre blocks */
.prose pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
  font-weight: normal;
  word-break: normal;
  color: inherit;
}

/* ============================================================================
 * Code Blocks (pre)
 * ============================================================================ */

.prose pre {
  font-family: var(--font-mono);
  font-size: 1.5rem; /* slide-code */
  line-height: 1.6;
  background-color: var(--color-code-bg);
  color: var(--color-code-text, #d4d4d4);
  padding: 1.5em 2em;
  border-radius: 8px;
  overflow-x: auto;
  margin: 0;
  margin-bottom: 1.5rem;
  tab-size: 2;
  hyphens: none;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
}

.prose pre:last-child {
  margin-bottom: 0;
}

/* Code block with line numbers support */
.prose pre.line-numbers {
  padding-left: 3.5em;
  position: relative;
}

/* ============================================================================
 * Blockquotes
 * ============================================================================ */

.prose blockquote {
  font-size: 2rem;
  line-height: 1.5;
  font-style: italic;
  border-left: 4px solid var(--color-accent);
  padding-left: 1.5em;
  margin: 0;
  margin-bottom: 1.5rem;
  color: var(--color-muted);
}

.prose blockquote p {
  margin-bottom: 0.75rem;
}

.prose blockquote p:last-child {
  margin-bottom: 0;
}

/* Attribution in blockquotes (typically marked with em or cite) */
.prose blockquote cite,
.prose blockquote footer {
  display: block;
  font-size: 1.5rem;
  font-style: normal;
  color: var(--color-muted);
  margin-top: 1rem;
}

.prose blockquote cite::before {
  content: "\2014\00A0"; /* em dash + non-breaking space */
}

/* Nested blockquotes */
.prose blockquote blockquote {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  border-left-color: var(--color-muted);
}

/* ============================================================================
 * Tables
 * ============================================================================ */

.prose table {
  width: 100%;
  border-collapse: collapse;
  font-size: 1.75rem;
  line-height: 1.5;
  margin: 0;
  margin-bottom: 1.5rem;
  overflow-x: auto;
  display: block;
}

@media (min-width: 640px) {
  .prose table {
    display: table;
  }
}

.prose thead {
  border-bottom: 2px solid var(--color-border, var(--color-muted));
}

.prose th {
  font-weight: 600;
  text-align: left;
  padding: 0.75em 1em;
  background-color: rgba(0, 0, 0, 0.02);
  color: var(--color-text);
}

.prose td {
  padding: 0.75em 1em;
  text-align: left;
  border-bottom: 1px solid var(--color-border, rgba(0, 0, 0, 0.1));
}

.prose tr:last-child td {
  border-bottom: none;
}

/* Striped rows (optional - add .striped class to table) */
.prose table.striped tbody tr:nth-child(even) {
  background-color: rgba(0, 0, 0, 0.02);
}

/* Numeric alignment for number columns */
.prose td.numeric,
.prose th.numeric {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

/* ============================================================================
 * Links
 * ============================================================================ */

.prose a {
  color: var(--color-accent);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color var(--transition-duration, 200ms) var(--transition-timing, ease-out),
    color var(--transition-duration, 200ms) var(--transition-timing, ease-out);
}

.prose a:hover {
  border-bottom-color: var(--color-accent);
}

.prose a:focus {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

/* External link indicator (optional - add class or use attribute selector) */
.prose a[target="_blank"]::after {
  content: "";
  display: inline-block;
  width: 0.65em;
  height: 0.65em;
  margin-left: 0.25em;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'/%3E%3Cpolyline points='15 3 21 3 21 9'/%3E%3Cline x1='10' y1='14' x2='21' y2='3'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  vertical-align: baseline;
  opacity: 0.6;
}

/* ============================================================================
 * Horizontal Rules
 * ============================================================================ */

.prose hr {
  border: none;
  height: 2px;
  background-color: var(--color-border, var(--color-muted));
  margin: 2rem 0;
  opacity: 0.3;
}

/* ============================================================================
 * Images
 * ============================================================================ */

.prose img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 0;
  margin-bottom: 1.5rem;
}

.prose img:last-child {
  margin-bottom: 0;
}

/* Figure with caption */
.prose figure {
  margin: 0;
  margin-bottom: 1.5rem;
}

.prose figure img {
  margin-bottom: 0.75rem;
}

.prose figcaption {
  font-size: 1.25rem;
  color: var(--color-muted);
  text-align: center;
  font-style: italic;
}

/* ============================================================================
 * Definition Lists
 * ============================================================================ */

.prose dl {
  margin: 0;
  margin-bottom: 1.5rem;
}

.prose dt {
  font-size: 1.75rem;
  font-weight: 600;
  margin-bottom: 0.25rem;
  color: var(--color-text);
}

.prose dd {
  font-size: 1.75rem;
  margin-left: 1.5em;
  margin-bottom: 1rem;
  color: var(--color-muted);
}

.prose dd:last-child {
  margin-bottom: 0;
}

/* ============================================================================
 * Text Formatting
 * ============================================================================ */

.prose strong,
.prose b {
  font-weight: 600;
  color: var(--color-text);
}

.prose em,
.prose i {
  font-style: italic;
}

.prose mark {
  background-color: var(--color-accent);
  color: var(--color-bg);
  padding: 0.1em 0.3em;
  border-radius: 2px;
}

.prose del,
.prose s {
  text-decoration: line-through;
  opacity: 0.7;
}

.prose small {
  font-size: 0.85em;
}

.prose sup {
  font-size: 0.75em;
  vertical-align: super;
}

.prose sub {
  font-size: 0.75em;
  vertical-align: sub;
}

.prose abbr[title] {
  text-decoration: underline dotted;
  cursor: help;
}

.prose kbd {
  font-family: var(--font-mono);
  font-size: 0.85em;
  background-color: var(--color-surface-elevated, #f3f4f6);
  border: 1px solid var(--color-border, #d1d5db);
  border-radius: 4px;
  padding: 0.15em 0.4em;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* ============================================================================
 * Selection
 * ============================================================================ */

.prose ::selection {
  background-color: var(--color-accent);
  color: var(--color-bg);
}

/* ============================================================================
 * Reduced Motion
 * ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .prose a {
    transition: none;
  }
}

/* ============================================================================
 * Prose Size Variants
 * ============================================================================ */

/* Smaller prose for multi-column layouts */
.prose-sm {
  font-size: 0.875em;
}

.prose-sm p,
.prose-sm li {
  font-size: 1.5rem;
}

.prose-sm h1 { font-size: 3rem; }
.prose-sm h2 { font-size: 2rem; }
.prose-sm h3 { font-size: 1.75rem; }
.prose-sm h4 { font-size: 1.5rem; }
.prose-sm pre { font-size: 1.25rem; }
.prose-sm blockquote { font-size: 1.5rem; }
.prose-sm table { font-size: 1.25rem; }

/* Larger prose for emphasis */
.prose-lg {
  font-size: 1.125em;
}

.prose-lg p,
.prose-lg li {
  font-size: 2.25rem;
}

.prose-lg h1 { font-size: 5rem; }
.prose-lg h2 { font-size: 3rem; }
.prose-lg h3 { font-size: 2.25rem; }
.prose-lg h4 { font-size: 2rem; }
.prose-lg pre { font-size: 1.75rem; }
.prose-lg blockquote { font-size: 2.25rem; }
.prose-lg table { font-size: 2rem; }
